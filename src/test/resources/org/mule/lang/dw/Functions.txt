FILE
  WeaveDocumentImpl(DOCUMENT)
    WeaveHeaderImpl(HEADER)
      WeaveVersionDirectiveImpl(VERSION_DIRECTIVE)
        PsiElement(%dw)('%dw')
        PsiWhiteSpace(' ')
        PsiElement(DOUBLE_LITERAL)('1.0')
      PsiWhiteSpace('\n')
      WeaveVariableDirectiveImpl(VARIABLE_DIRECTIVE)
        PsiElement(%var)('%var')
        PsiWhiteSpace(' ')
        WeaveVariableDefinitionImpl(VARIABLE_DEFINITION)
          WeaveIdentifierImpl(IDENTIFIER)
            PsiElement(ID)('x')
          PsiElement(=)('=')
          WeaveLambdaLiteralImpl(LAMBDA_LITERAL)
            PsiElement(()('(')
            WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
              WeaveIdentifierImpl(IDENTIFIER)
                PsiElement(ID)('param1')
            PsiElement(,)(',')
            PsiWhiteSpace(' ')
            WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
              WeaveIdentifierImpl(IDENTIFIER)
                PsiElement(ID)('param2')
            PsiElement())(')')
            PsiWhiteSpace(' ')
            PsiElement(->)('->')
            PsiWhiteSpace(' ')
            WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
              WeaveMultipleKeyValuePairObjImpl(MULTIPLE_KEY_VALUE_PAIR_OBJ)
                PsiElement({)('{')
                PsiWhiteSpace(' ')
                WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                  WeaveSimpleKeyValuePairImpl(SIMPLE_KEY_VALUE_PAIR)
                    WeaveKeyImpl(KEY)
                      WeaveStringLiteralImpl(STRING_LITERAL)
                        PsiElement(DOUBLE_QUOTED_STRING)('"$param1"')
                    PsiElement(:)(':')
                    PsiWhiteSpace(' ')
                    WeaveVariableReferenceExpressionImpl(VARIABLE_REFERENCE_EXPRESSION)
                      WeaveIdentifierImpl(IDENTIFIER)
                        PsiElement(ID)('param2')
                PsiWhiteSpace(' ')
                PsiElement(})('}')
      PsiWhiteSpace('\n')
      WeaveVariableDirectiveImpl(VARIABLE_DIRECTIVE)
        PsiElement(%var)('%var')
        PsiWhiteSpace(' ')
        WeaveVariableDefinitionImpl(VARIABLE_DEFINITION)
          WeaveIdentifierImpl(IDENTIFIER)
            PsiElement(ID)('y')
          PsiElement(=)('=')
          WeaveLambdaLiteralImpl(LAMBDA_LITERAL)
            PsiElement(()('(')
            WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
              WeaveIdentifierImpl(IDENTIFIER)
                PsiElement(ID)('param1')
            PsiElement(,)(',')
            PsiWhiteSpace(' ')
            WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
              WeaveIdentifierImpl(IDENTIFIER)
                PsiElement(ID)('param2')
              PsiWhiteSpace(' ')
              PsiElement(=)('=')
              PsiWhiteSpace(' ')
              WeaveStringLiteralImpl(STRING_LITERAL)
                PsiElement(DOUBLE_QUOTED_STRING)('"c"')
            PsiElement())(')')
            PsiWhiteSpace(' ')
            PsiElement(->)('->')
            PsiWhiteSpace(' ')
            WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
              WeaveMultipleKeyValuePairObjImpl(MULTIPLE_KEY_VALUE_PAIR_OBJ)
                PsiElement({)('{')
                PsiWhiteSpace(' ')
                WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                  WeaveSimpleKeyValuePairImpl(SIMPLE_KEY_VALUE_PAIR)
                    WeaveKeyImpl(KEY)
                      WeaveStringLiteralImpl(STRING_LITERAL)
                        PsiElement(DOUBLE_QUOTED_STRING)('"$param1"')
                    PsiElement(:)(':')
                    PsiWhiteSpace(' ')
                    WeaveVariableReferenceExpressionImpl(VARIABLE_REFERENCE_EXPRESSION)
                      WeaveIdentifierImpl(IDENTIFIER)
                        PsiElement(ID)('param2')
                PsiWhiteSpace(' ')
                PsiElement(})('}')
      PsiWhiteSpace('\n')
      WeaveVariableDirectiveImpl(VARIABLE_DIRECTIVE)
        PsiElement(%var)('%var')
        PsiWhiteSpace(' ')
        WeaveVariableDefinitionImpl(VARIABLE_DEFINITION)
          WeaveIdentifierImpl(IDENTIFIER)
            PsiElement(ID)('toUser')
          PsiWhiteSpace(' ')
          PsiElement(=)('=')
          PsiWhiteSpace(' ')
          WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
            WeaveSingleKeyValuePairObjImpl(SINGLE_KEY_VALUE_PAIR_OBJ)
              WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                WeaveDynamicKeyValuePairImpl(DYNAMIC_KEY_VALUE_PAIR)
                  WeaveEnclosedExpressionImpl(ENCLOSED_EXPRESSION)
                    PsiElement(()('(')
                    WeaveVariableReferenceExpressionImpl(VARIABLE_REFERENCE_EXPRESSION)
                      WeaveIdentifierImpl(IDENTIFIER)
                        PsiElement(ID)('user')
                    PsiElement())(')')
        PsiWhiteSpace(' ')
        PsiErrorElement:':' or '@(' expected, got '->'
          PsiElement(->)('->')
        PsiElement(DUMMY_BLOCK)
          PsiWhiteSpace(' ')
          PsiElement({)('{')
          PsiWhiteSpace(' ')
          PsiElement(ID)('name')
          PsiElement(:)(':')
          PsiWhiteSpace(' ')
          PsiElement(ID)('user')
          PsiElement(BAD_CHARACTER)('.')
          PsiElement(ID)('name')
          PsiElement(,)(',')
          PsiWhiteSpace('\t')
          PsiElement(ID)('lastName')
          PsiElement(:)(':')
          PsiWhiteSpace(' ')
          PsiElement(ID)('user')
        PsiElement(BAD_CHARACTER)('.')
        PsiElement(ID)('lastName')
        PsiWhiteSpace(' ')
        PsiElement(})('}')
      PsiWhiteSpace('\n')
      WeaveFunctionDirectiveImpl(FUNCTION_DIRECTIVE)
        PsiElement(%function)('%function')
        PsiWhiteSpace(' ')
        WeaveFunctionDefinitionImpl(FUNCTION_DEFINITION)
          WeaveIdentifierImpl(IDENTIFIER)
            PsiElement(ID)('z')
          PsiElement(()('(')
          WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
            WeaveIdentifierImpl(IDENTIFIER)
              PsiElement(ID)('param1')
          PsiElement(,)(',')
          PsiWhiteSpace(' ')
          WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
            WeaveIdentifierImpl(IDENTIFIER)
              PsiElement(ID)('param2')
          PsiElement())(')')
          PsiWhiteSpace(' ')
          WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
            WeaveMultipleKeyValuePairObjImpl(MULTIPLE_KEY_VALUE_PAIR_OBJ)
              PsiElement({)('{')
              PsiWhiteSpace(' ')
              WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                WeaveSimpleKeyValuePairImpl(SIMPLE_KEY_VALUE_PAIR)
                  WeaveKeyImpl(KEY)
                    WeaveStringLiteralImpl(STRING_LITERAL)
                      PsiElement(DOUBLE_QUOTED_STRING)('"$param1"')
                  PsiElement(:)(':')
                  PsiWhiteSpace(' ')
                  WeaveVariableReferenceExpressionImpl(VARIABLE_REFERENCE_EXPRESSION)
                    WeaveIdentifierImpl(IDENTIFIER)
                      PsiElement(ID)('param2')
              PsiWhiteSpace(' ')
              PsiElement(})('}')
      PsiWhiteSpace('\n')
      WeaveVariableDirectiveImpl(VARIABLE_DIRECTIVE)
        PsiElement(%var)('%var')
        PsiWhiteSpace(' ')
        WeaveVariableDefinitionImpl(VARIABLE_DEFINITION)
          WeaveIdentifierImpl(IDENTIFIER)
            PsiElement(ID)('a')
          PsiWhiteSpace(' ')
          PsiElement(=)('=')
          PsiWhiteSpace(' ')
          WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
            WeaveMultipleKeyValuePairObjImpl(MULTIPLE_KEY_VALUE_PAIR_OBJ)
              PsiElement({)('{')
              PsiWhiteSpace(' ')
              WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                WeaveSimpleKeyValuePairImpl(SIMPLE_KEY_VALUE_PAIR)
                  WeaveKeyImpl(KEY)
                    WeaveKeyExpressionImpl(KEY_EXPRESSION)
                      WeaveIdentifierImpl(IDENTIFIER)
                        PsiElement(ID)('name')
                  PsiElement(:)(':')
                  PsiWhiteSpace(' ')
                  WeaveStringLiteralImpl(STRING_LITERAL)
                    PsiElement(DOUBLE_QUOTED_STRING)('"Mariano"')
              PsiWhiteSpace(' ')
              PsiElement(,)(',')
              PsiWhiteSpace(' ')
              WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                WeaveSimpleKeyValuePairImpl(SIMPLE_KEY_VALUE_PAIR)
                  WeaveKeyImpl(KEY)
                    WeaveKeyExpressionImpl(KEY_EXPRESSION)
                      WeaveIdentifierImpl(IDENTIFIER)
                        PsiElement(ID)('toUser')
                  PsiElement(:)(':')
                  PsiWhiteSpace(' ')
                  WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
                    WeaveSingleKeyValuePairObjImpl(SINGLE_KEY_VALUE_PAIR_OBJ)
                      WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                        WeaveDynamicKeyValuePairImpl(DYNAMIC_KEY_VALUE_PAIR)
                          WeaveEnclosedExpressionImpl(ENCLOSED_EXPRESSION)
                            PsiElement(()('(')
                            WeaveLambdaLiteralImpl(LAMBDA_LITERAL)
                              PsiElement(()('(')
                              WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
                                WeaveIdentifierImpl(IDENTIFIER)
                                  PsiElement(ID)('param1')
                              PsiElement(,)(',')
                              PsiWhiteSpace(' ')
                              WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
                                WeaveIdentifierImpl(IDENTIFIER)
                                  PsiElement(ID)('param2')
                              PsiElement())(')')
                              PsiWhiteSpace(' ')
                              PsiElement(->)('->')
                              PsiWhiteSpace(' ')
                              WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
                                WeaveMultipleKeyValuePairObjImpl(MULTIPLE_KEY_VALUE_PAIR_OBJ)
                                  PsiElement({)('{')
                                  PsiWhiteSpace(' ')
                                  WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                                    WeaveSimpleKeyValuePairImpl(SIMPLE_KEY_VALUE_PAIR)
                                      WeaveKeyImpl(KEY)
                                        WeaveStringLiteralImpl(STRING_LITERAL)
                                          PsiElement(DOUBLE_QUOTED_STRING)('"$param1"')
                                      PsiElement(:)(':')
                                      PsiWhiteSpace(' ')
                                      WeaveVariableReferenceExpressionImpl(VARIABLE_REFERENCE_EXPRESSION)
                                        WeaveIdentifierImpl(IDENTIFIER)
                                          PsiElement(ID)('param2')
                                  PsiWhiteSpace(' ')
                                  PsiElement(})('}')
                            PsiElement())(')')
              PsiWhiteSpace(' ')
              PsiElement(})('}')
      PsiWhiteSpace('\n')
      WeaveVariableDirectiveImpl(VARIABLE_DIRECTIVE)
        PsiElement(%var)('%var')
        PsiWhiteSpace(' ')
        WeaveVariableDefinitionImpl(VARIABLE_DEFINITION)
          WeaveIdentifierImpl(IDENTIFIER)
            PsiElement(ID)('applyFirst')
          PsiWhiteSpace(' ')
          PsiElement(=)('=')
          PsiWhiteSpace('  ')
          WeaveLambdaLiteralImpl(LAMBDA_LITERAL)
            PsiElement(()('(')
            WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
              WeaveIdentifierImpl(IDENTIFIER)
                PsiElement(ID)('array')
            PsiElement(,)(',')
            PsiWhiteSpace(' ')
            WeaveFunctionParameterImpl(FUNCTION_PARAMETER)
              WeaveIdentifierImpl(IDENTIFIER)
                PsiElement(ID)('func')
            PsiElement())(')')
            PsiWhiteSpace(' ')
            PsiElement(->)('->')
            PsiWhiteSpace(' ')
            WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
              WeaveSingleKeyValuePairObjImpl(SINGLE_KEY_VALUE_PAIR_OBJ)
                WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
                  WeaveDynamicKeyValuePairImpl(DYNAMIC_KEY_VALUE_PAIR)
                    WeaveEnclosedExpressionImpl(ENCLOSED_EXPRESSION)
                      PsiElement(()('(')
                      WeaveBinaryExpressionImpl(BINARY_EXPRESSION)
                        WeaveFunctionCallExpressionImpl(FUNCTION_CALL_EXPRESSION)
                          WeaveIdentifierImpl(IDENTIFIER)
                            PsiElement(ID)('func')
                          PsiElement(()('(')
                          WeaveDynamicSelectorExpressionImpl(DYNAMIC_SELECTOR_EXPRESSION)
                            WeaveVariableReferenceExpressionImpl(VARIABLE_REFERENCE_EXPRESSION)
                              WeaveIdentifierImpl(IDENTIFIER)
                                PsiElement(ID)('array')
                            PsiElement([)('[')
                            WeaveNumberLiteralImpl(NUMBER_LITERAL)
                              PsiElement(INTEGER_LITERAL)('0')
                            PsiElement(])(']')
                          PsiElement())(')')
                        PsiWhiteSpace(' ')
                        PsiElement(RULE_BINARY_OPERATORS)('++')
                        PsiWhiteSpace('  ')
                        WeaveRangeSelectorExpressionImpl(RANGE_SELECTOR_EXPRESSION)
                          WeaveVariableReferenceExpressionImpl(VARIABLE_REFERENCE_EXPRESSION)
                            WeaveIdentifierImpl(IDENTIFIER)
                              PsiElement(ID)('array')
                          PsiElement(RULE_RANGE_LITERAL)('[1..-1]')
                      PsiElement())(')')
      PsiWhiteSpace('\n')
      PsiElement(---)('---')
    PsiWhiteSpace('\n')
    WeaveBodyImpl(BODY)
      WeaveObjectExpressionImpl(OBJECT_EXPRESSION)
        WeaveSingleKeyValuePairObjImpl(SINGLE_KEY_VALUE_PAIR_OBJ)
          WeaveKeyValuePairImpl(KEY_VALUE_PAIR)
            WeaveSimpleKeyValuePairImpl(SIMPLE_KEY_VALUE_PAIR)
              WeaveKeyImpl(KEY)
                WeaveKeyExpressionImpl(KEY_EXPRESSION)
                  WeaveIdentifierImpl(IDENTIFIER)
                    PsiElement(ID)('result')
              PsiElement(:)(':')
  PsiWhiteSpace(' ')
  PsiElement({)('{')
  PsiWhiteSpace('\n  ')
  PsiElement(ID)('a')
  PsiElement(:)(':')
  PsiWhiteSpace(' ')
  PsiElement(ID)('x')
  PsiElement(()('(')
  PsiElement(DOUBLE_QUOTED_STRING)('"a"')
  PsiElement(,)(',')
  PsiWhiteSpace(' ')
  PsiElement(DOUBLE_QUOTED_STRING)('"b"')
  PsiElement())(')')
  PsiElement(,)(',')
  PsiWhiteSpace('\n  ')
  PsiElement(ID)('b')
  PsiElement(:)(':')
  PsiWhiteSpace(' ')
  PsiElement(ID)('y')
  PsiElement(()('(')
  PsiElement(DOUBLE_QUOTED_STRING)('"a"')
  PsiElement())(')')
  PsiElement(,)(',')
  PsiWhiteSpace('\n  ')
  PsiElement(ID)('c')
  PsiElement(:)(':')
  PsiWhiteSpace(' ')
  PsiElement(ID)('y')
  PsiElement(()('(')
  PsiElement(DOUBLE_QUOTED_STRING)('"a"')
  PsiElement(,)(',')
  PsiWhiteSpace(' ')
  PsiElement(DOUBLE_QUOTED_STRING)('"b"')
  PsiElement())(')')
  PsiElement(,)(',')
  PsiWhiteSpace('\n  ')
  PsiElement(ID)('users')
  PsiElement(:)(':')
  PsiWhiteSpace(' ')
  PsiElement({)('{')
  PsiWhiteSpace(' ')
  PsiElement(()('(')
  PsiElement(ID)('in1')
  PsiWhiteSpace(' ')
  PsiElement(RULE_BINARY_CLOJURE_OPERATORS)('map')
  PsiWhiteSpace(' ')
  PsiElement(()('(')
  PsiElement(()('(')
  PsiElement(ID)('user')
  PsiElement())(')')
  PsiWhiteSpace(' ')
  PsiElement(->)('->')
  PsiWhiteSpace(' ')
  PsiElement({)('{')
  PsiWhiteSpace(' ')
  PsiElement(ID)('user')
  PsiElement(:)(':')
  PsiWhiteSpace(' ')
  PsiElement(()('(')
  PsiElement(ID)('toUser')
  PsiElement(()('(')
  PsiElement(ID)('user')
  PsiElement())(')')
  PsiWhiteSpace(' ')
  PsiElement(RULE_BINARY_OPERATORS)('++')
  PsiWhiteSpace(' ')
  PsiElement(ID)('user')
  PsiElement())(')')
  PsiWhiteSpace(' ')
  PsiElement(})('}')
  PsiElement())(')')
  PsiElement())(')')
  PsiWhiteSpace(' ')
  PsiElement(})('}')
  PsiElement(,)(',')
  PsiWhiteSpace('\n  ')
  PsiElement(ID)('d')
  PsiElement(:)(':')
  PsiWhiteSpace(' ')
  PsiElement(ID)('z')
  PsiElement(()('(')
  PsiElement(DOUBLE_QUOTED_STRING)('"a"')
  PsiElement(,)(',')
  PsiWhiteSpace(' ')
  PsiElement(DOUBLE_QUOTED_STRING)('"b"')
  PsiElement())(')')
  PsiElement(,)(',')
  PsiWhiteSpace('\n  ')
  PsiElement(ID)('e')
  PsiElement(:)(':')
  PsiWhiteSpace(' ')
  PsiElement(ID)('a')
  PsiElement(BAD_CHARACTER)('.')
  PsiElement(ID)('toUser')
  PsiErrorElement:'#', ',' or '}' expected, got '('
    PsiElement(()('(')
  PsiElement(DUMMY_BLOCK)
    PsiElement(DOUBLE_QUOTED_STRING)('"name"')
    PsiElement(,)(',')
    PsiElement(DOUBLE_QUOTED_STRING)('"Mariano"')
    PsiElement())(')')
    PsiElement(,)(',')
    PsiWhiteSpace('\n  ')
    PsiElement(ID)('f')
    PsiElement(:)(':')
    PsiWhiteSpace(' ')
    PsiElement(ID)('a')
    PsiElement(BAD_CHARACTER)('.')
    PsiElement(ID)('toUser')
  PsiElement(DUMMY_BLOCK)
    PsiElement(()('(')
    PsiElement(DOUBLE_QUOTED_STRING)('"name"')
    PsiElement(,)(',')
    PsiElement(DOUBLE_QUOTED_STRING)('"Mariano"')
    PsiElement())(')')
    PsiElement(BAD_CHARACTER)('.')
    PsiElement(ID)('name')
    PsiElement(,)(',')
    PsiWhiteSpace('\n  ')
    PsiElement(ID)('f')
    PsiElement(:)(':')
  PsiElement(DUMMY_BLOCK)
    PsiWhiteSpace(' ')
    PsiElement(ID)('applyFirst')
    PsiElement(()('(')
    PsiElement(DOUBLE_QUOTED_STRING)('"mariano"')
    PsiElement(,)(',')
    PsiWhiteSpace(' ')
    PsiElement(()('(')
    PsiElement(ID)('s')
    PsiElement())(')')
    PsiWhiteSpace(' ')
    PsiElement(->)('->')
    PsiWhiteSpace(' ')
    PsiElement(RULE_UNARY_OPERATOS)('upper')
    PsiWhiteSpace(' ')
    PsiElement(ID)('s')
  PsiWhiteSpace(' ')
  PsiElement())(')')
  PsiWhiteSpace('\n')
  PsiElement(})('}')